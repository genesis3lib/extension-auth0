{
  "version": "3.0.0",
  "metadata": {
    "id": "extension-auth0",
    "name": "Auth0 Authentication",
    "kind": "extension",
    "layers": [
      "backend",
      "frontend"
    ],
    "type": "auth0",
    "description": "Add Auth0 OAuth2 authentication across all layers",
    "version": "1.0.0",
    "author": "Genesis Team",
    "tags": [
      "authentication",
      "security",
      "oauth2",
      "rbac",
      "auth0"
    ],
    "providers": [
      "aws"
    ],
    "compatibleWith": [
      "spring",
      "react",
      "drf"
    ],
    "dependsOn": [
      "extension-rbac"
    ],
    "springProfiles": [
      "auth0"
    ],
    "allowMultiple": false,
    "providesFragments": {
      "authentication-provider": {
        "mode": "conflict",
        "notes": "Provides Auth0 OAuth2 authentication across backend and frontend"
      },
      "django-settings": {
        "mode": "append"
      }
    },
    "onConflict": {
      "message": "Choose only one authentication provider (Auth0, Okta, or Stytch)"
    }
  },
  "scaffoldConfigTemplate": [
    {
      "key": "auth0Domain",
      "label": "Auth0 Domain",
      "type": "text",
      "required": true,
      "description": "Your Auth0 domain (e.g., your-tenant.auth0.com)",
      "example": "your-tenant.auth0.com",
      "category": "authentication"
    },
    {
      "key": "enableRbac",
      "label": "Enable Role-Based Access Control",
      "type": "boolean",
      "default": true,
      "required": false,
      "description": "Enable RBAC with role annotations",
      "category": "feature"
    },
    {
      "key": "roleClaimKey",
      "label": "Role Claim Key",
      "type": "text",
      "default": "runtime",
      "required": false,
      "description": "Custom claim key for user roles in JWT token (will be populated at runtime)",
      "category": "authentication"
    },
    {
      "key": "tenantIdClaimKey",
      "label": "Tenant ID JWT Claim Key",
      "type": "text",
      "default": "runtime",
      "required": false,
      "description": "JWT claim key to extract tenant ID from (leave empty for single-tenant apps)",
      "category": "authentication"
    },
    {
      "key": "syncUserOnFirstLogin",
      "label": "Create User on First Login",
      "type": "boolean",
      "default": true,
      "required": false,
      "description": "Automatically create local user record on first Auth0 login",
      "category": "authentication"
    },
    {
      "key": "updateUserOnEachLogin",
      "label": "Update User on Each Login",
      "type": "boolean",
      "default": false,
      "required": false,
      "description": "Update user profile from Auth0 on every login",
      "category": "authentication"
    }
  ],
  "dependencies": {
    "gradle": [
      "implementation 'org.springframework.boot:spring-boot-starter-oauth2-resource-server'"
    ],
    "npm": {
      "dependencies": {
        "@auth0/auth0-react": "^2.0.0"
      }
    },
    "pip": [
      "PyJWT==2.8.0",
      "cryptography==42.0.0"
    ]
  },
  "generation": {
    "layers": {
      "backend": {},
      "frontend": {}
    }
  },
  "runtimeConfigTemplate": [
    {
      "key": "AUTH0_CLIENT_ID",
      "description": "Auth0 application client ID",
      "example": "your-client-id",
      "required": true,
      "secret": false,
      "targets": [
        "backend",
        "frontend"
      ],
      "commonForAllEnv": false
    },
    {
      "key": "AUTH0_CLIENT_SECRET",
      "description": "Auth0 application client secret (backend only)",
      "example": "your-client-secret",
      "required": true,
      "secret": true,
      "targets": [
        "backend"
      ],
      "commonForAllEnv": false
    },
    {
      "key": "AUTH0_AUDIENCE",
      "description": "Auth0 API audience/identifier",
      "example": "https://{{domain}}/api",
      "default": "runtime",
      "required": true,
      "secret": false,
      "targets": [
        "backend",
        "frontend"
      ],
      "commonForAllEnv": false
    },
    {
      "key": "AUTH0_DOMAIN",
      "description": "Auth0 domain (tenant.auth0.com)",
      "example": "your-tenant.auth0.com",
      "required": true,
      "secret": false,
      "targets": [
        "backend",
        "frontend"
      ],
      "commonForAllEnv": true
    },
    {
      "key": "AUTH0_ISSUER_URI",
      "description": "Auth0 issuer URI (optional, auto-derived from domain if not set)",
      "example": "https://your-tenant.auth0.com/",
      "required": false,
      "secret": false,
      "targets": [
        "backend"
      ],
      "commonForAllEnv": true
    },
    {
      "key": "CORS_ALLOWED_ORIGINS",
      "description": "Comma-separated list of allowed CORS origins (www subdomain auto-included)",
      "example": "https://example.com,https://app.example.com",
      "required": false,
      "secret": false,
      "targets": [
        "backend"
      ],
      "commonForAllEnv": false
    }
  ]
}